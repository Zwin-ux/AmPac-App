{
  "enabled": true,
  "name": "API Postman Testing",
  "description": "Monitors API source code changes across the AmPac project and automatically runs Postman collection tests to validate functionality",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "apps/brain/**/*.py",
      "apps/brain/requirements.txt",
      "apps/brain/app/**/*.py",
      "apps/mobile/src/services/**/*.ts",
      "apps/mobile/src/services/**/*.js",
      "apps/console/src/services/**/*.ts",
      "apps/console/src/services/**/*.js",
      "apps/functions/**/*.js",
      "apps/functions/**/*.ts",
      "apps/brain/api_spec.md",
      "apps/brain/app/main.py",
      "apps/brain/app/api/**/*.py",
      "package.json",
      "apps/*/package.json"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "API source code or configuration has been modified in the AmPac project. Please retrieve the contents of the .postman.json file. If the file does not exist or is empty, create a Postman collection for the AmPac API (focusing on the Brain service endpoints). If it exists, get the collection ID and run the collection, showing me the results and propose fixes for any errors found."
  }
}